@model MegatubeV2.Models.PaymentData

@using (Html.BeginForm("Create", "Payments", FormMethod.Post, new { @class = "m-t-3", id = "paymentsCreate", enctype="multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Payment</h4>
        <hr />
        <div class="form-group m-b-0">
            <label class="col-xs-4 control-label">User</label>
            <div class="col-xs-8">
                <p class="form-control-static">
                    @{
                        string Name = Model.User.Name + " " + Model.User.LastName;
                        @Html.Raw(Name)
                    }
                </p>
            </div>
        </div>
        <div class="form-group m-b-0">
            <label class="col-xs-4 control-label">Payment mode</label>
            <div class="col-xs-8">
                <p class="form-control-static">
                    Not Implemented
                </p>
            </div>
        </div>
        <div class="form-group m-b-0">
            <label class="col-xs-4 control-label">From</label>
            <div class="col-xs-8">
                <p class="form-control-static">
                    @Model.From
                </p>
            </div>
        </div>
        <div class="form-group m-b-0">
            <label class="col-xs-4 control-label">To</label>
            <div class="col-xs-8">
                <p class="form-control-static">
                    @Model.To
                </p>
            </div>
        </div>

        <table class="table table-condensed table-hover table-striped" id="paymentCreateTable">
            <thead>
                <tr>
                    <th>
                        Reason
                    </th>
                    <th>
                        Gross
                    </th>
                    <th>
                        Net
                    </th>
                    <th>
                        Date From
                    </th>
                    <th>
                        Date To
                    </th>
                    <th>
                        Type
                    </th>
                </tr>
            </thead>
            <tbody>
            @foreach (var item in Model.Accreditations)
            {
                <tr>
                    <td>Not Implemented</td>
                    <td>@item.GrossAmmount</td>
                    <td>Not Implemented</td>
                    <td>Not Implemented</td>
                    <td>@item.DateFrom.ToShortDateString()</td>
                    <td>@item.DateTo.ToShortDateString()</td>
                </tr>
            }
            </tbody>
        </table>
        
        @{ 
            DateTime currentDate = DateTime.Today;
            string currentDateStr = currentDate.Year.ToString() + "-" + currentDate.Month.ToString() + "-" + currentDate.Day.ToString();

        }
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="hidden" name="userId" value="@Model.User.Id" />
                <input type="text" name="receiptCounter" class="form-inline" style="width:60px" value="@Model.ReceiptCounter" />
                <input type="date" value="@currentDateStr" class="btn btn-default" />
                <a href="javasctipt:{}" onclick="$('#paymentsCreate').submit(); return false;" role="button" class="btn btn-default">Upload</a>
            </div>
        </div>
    </div>
  }
<script language="javascript">

    $(document).ready(function () {
        $('#paymentCreateTable').DataTable({
            "pageLength": 50
        });
    });
</script>
